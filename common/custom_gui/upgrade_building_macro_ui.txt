#Before opening the upgrade building macro window
custom_button = {
	name = upgrade_building_macro_tab_window_closed
	tooltip = fort_macro_button_tt
	potential = {
		FROM = {
			NOT = {
				has_country_flag = upgrade_building_macro_open
			}
		}
	}
	trigger = {
	}
	effect = {
		FROM = {
			set_country_flag = upgrade_building_macro_open
		}
	}
}

#After opening the upgrade building macro window
#We do this because the macro window obstructs the tab to open it.
custom_button = {
	name = upgrade_building_macro_tab_window_opened
	tooltip = fort_macro_button_tt
	potential = {
		FROM = {
			has_country_flag = upgrade_building_macro_open
		}
	}
	trigger = {
	}
	frame = {
		number = 2
		trigger = {
			FROM = {
				has_country_flag = upgrade_building_macro_open
			}
		}
	}
	effect = {
		FROM = {
			clr_country_flag = upgrade_building_macro_open
		}
	}
}

custom_button = {
	name = hidden_upgrade_building_macro_close_button
	potential = {
		FROM = {
			has_country_flag = upgrade_building_macro_open
		}
	}
	effect = {
		FROM = {
			clr_country_flag = upgrade_building_macro_open
		}
	}
}

custom_window = {
	name = upgrade_building_macro_window
	potential = {
		FROM = {
			has_country_flag = upgrade_building_macro_open
		}
	}
}

custom_button = {
	name = upgrade_to_trade_depot_button
	tooltip = upgrade_to_trade_depot_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 20
			any_owned_province = {
				has_building = marketplace
				can_build = trade_depot
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_trade_buildings_to_trade_depots = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_stock_exchange_button
	tooltip = upgrade_to_stock_exchange_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 30
			any_owned_province = {
				OR = {
					has_building = marketplace
					has_building = trade_depot
				}
				can_build = stock_exchange
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_trade_buildings_to_stock_exchanges = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_town_hall_button
	tooltip = upgrade_to_town_hall_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 10
			any_owned_province = {
				has_building = courthouse
				can_build = town_hall
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_government_buildings_to_town_halls = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_drydock_button
	tooltip = upgrade_to_drydock_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 20
			any_owned_province = {
				has_building = dock
				can_build = drydock
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_dock_buildings_to_dry_docks = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_grand_shipyard_button
	tooltip = upgrade_to_grand_shipyard_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 20
			any_owned_province = {
				has_building = shipyard
				can_build = grand_shipyard
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_shipyard_buildings_to_grand_shipyards = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_counting_house_button
	tooltip = upgrade_to_counting_house_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 30
			any_owned_province = {
				has_building = workshop
				can_build = counting_house
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_workshop_buildings_to_counting_houses = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_training_fields_button
	tooltip = upgrade_to_training_fields_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 20
			any_owned_province = {
				has_building = barracks
				can_build = training_fields
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_manpower_buildings_to_training_fields = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_conscription_center_button
	tooltip = upgrade_to_conscription_center_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 20
			any_owned_province = {
				has_building = regimental_camp
				can_build = conscription_center
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_force_limit_buildings_to_conscription_center = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_cathedral_button
	tooltip = upgrade_to_cathedral_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 20
			any_owned_province = {
				has_building = temple
				can_build = cathedral
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_tax_buildings_to_cathedrals = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_fort_16th_button
	tooltip = upgrade_to_fort_16th_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 20
			any_owned_province = {
				has_building = fort_15th
				can_build = fort_16th
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_fort_buildings_to_level_4_fort = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_fort_17th_button
	tooltip = upgrade_to_fort_17th_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 40
			any_owned_province = {
				OR = {
					has_building = fort_15th
					has_building = fort_16th
				}
				can_build = fort_17th
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_fort_buildings_to_level_6_fort = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_fort_18th_button
	tooltip = upgrade_to_fort_18th_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 60
			any_owned_province = {
				OR = {
					has_building = fort_15th
					has_building = fort_16th
					has_building = fort_17th
				}
				can_build = fort_18th
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_fort_buildings_to_level_8_fort = yes
			}
		}
	}
}

custom_button = {
	name = upgrade_to_naval_battery_button
	tooltip = upgrade_to_naval_battery_button_tt
	potential = {
	}
	trigger = {
		FROM = {
			treasury = 10
			any_owned_province = {
				has_building = coastal_defence
				can_build = naval_battery
				NOT = {
					has_construction = any
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				upgrade_all_coastal_defenses_to_naval_battery = yes
			}
		}
	}
}
