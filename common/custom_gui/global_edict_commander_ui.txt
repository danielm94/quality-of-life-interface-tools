#TODO: Refactor potential for all buttons once you redo the UI
custom_window = {
	name = global_edicts_window
	potential = {
		is_state = yes
		owned_by = FROM
		FROM = {
			has_country_flag = global_edicts_window_open
		}
	}
}

custom_button = {
	name = global_edicts_close_button
	tooltip = close_global_edict_button_tt
	potential = {
	}
	trigger = {
	}
	effect = {
		FROM = {
			clr_country_flag = global_edicts_window_open
		}
	}
}

custom_button = {
	name = open_global_edict_button
	tooltip = open_global_edict_button_tt
	potential = {
		is_state = yes
		owned_by = FROM
	}
	trigger = {
	}
	effect = {
		FROM = {
			if = {
				limit = {
					FROM = {
						NOT = {
							has_country_flag = global_edicts_window_open
						}
					}
				}
				set_country_flag = global_edicts_window_open
			}
			else = {
				clr_country_flag = global_edicts_window_open
			}
		}
	}
}

custom_button = {
	name = global_edicts_no_edicts_button
	tooltip = global_edicts_no_edicts_button_tt
	potential = {
		FROM = {
			NOT = {
				has_country_modifier = edict_commander_cooldown
			}
		}
	}
	trigger = {
	}
	effect = {
		FROM = {
			edict_commander_clear_all_state_edicts = yes
		}
	}
}

custom_button = {
	name = global_edicts_advancement_button
	tooltip = global_edicts_advancement_button_tt
	potential = {
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				if = {
					limit = {
						has_country_flag = quick_select_advancement_effort_1
					}
					country_event = {
						id = global_edict_commander_option_events.1
					}
				}
				else_if = {
					limit = {
						has_country_flag = quick_select_advancement_effort_2
					}
					country_event = {
						id = global_edict_commander_option_events.2
					}
				}
				else = {
					country_event = {
						id = global_edicts_commander_events.1
					}
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_centralization_button
	tooltip = global_edicts_centralization_button_tt
	potential = {
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.2
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_defensive_button
	tooltip = global_edicts_defensive_button_tt
	potential = {
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.3
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_development_button
	tooltip = global_edicts_development_button_tt
	potential = {
		FROM = {
			NOT = {
				AND = {
					has_country_flag = enable_industrialisation_flag
					is_emperor_of_china = yes
				}
			}
		}
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.5
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_enlistment_button
	tooltip = global_edicts_enlistment_button_tt
	potential = {
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.7
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_trade_button
	tooltip = global_edicts_trade_button_tt
	potential = {
		FROM = {
			NOT = {
				has_country_flag = fra_improve_trade_power_state_edict_flag
			}
		}
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.8
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_missionary_strength_button
	tooltip = global_edicts_missionary_strength_button_tt
	potential = {
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.9
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_unrest_button
	tooltip = global_edicts_unrest_button_tt
	potential = {
		current_age = age_of_discovery
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = global_edicts_unrest_button_trigger_tt
			FROM = {
				has_country_flag = feudal_de_jure_law
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.10
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_resist_reformation_button
	tooltip = global_edicts_resist_reformation_button_tt
	potential = {
		current_age = age_of_reformation
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = global_edicts_resist_reformation_button_trigger_tt
			FROM = {
				has_country_flag = religion_enforced_edict
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				country_event = {
					id = global_edicts_commander_events.11
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_devastation_button
	tooltip = global_edicts_devastation_button_tt
	potential = {
		current_age = age_of_absolutism
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = global_edicts_devastation_button_trigger_tt
			FROM = {
				has_country_flag = edict_of_absolutism
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				country_event = {
					id = global_edicts_commander_events.12
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_taxes_button
	tooltip = global_edicts_taxes_button_tt
	potential = {
		current_age = age_of_discovery
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = regional_councils_trigger_tt
			FROM = {
				has_government_attribute = unlock_special_state_edicts
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				country_event = {
					id = global_edicts_commander_events.13
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_local_religious_unity_button
	tooltip = global_edicts_local_religious_unity_button_tt
	potential = {
		current_age = age_of_reformation
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = regional_councils_trigger_tt
			FROM = {
				has_government_attribute = unlock_special_state_edicts
			}
		}
	}
	effect = {
		FROM = {
			edict_commander_set_edict_every_state = {
				edict = religious_tolerance_state_edict
			}
		}
	}
}

custom_button = {
	name = global_edicts_local_separatism_button
	tooltip = global_edicts_local_separatism_button_tt
	potential = {
		current_age = age_of_absolutism
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = regional_councils_trigger_tt
			FROM = {
				has_government_attribute = unlock_special_state_edicts
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.14
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_goods_produced_button
	tooltip = global_edicts_goods_produced_button_tt
	potential = {
		current_age = age_of_revolutions
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
		custom_trigger_tooltip = {
			tooltip = regional_councils_trigger_tt
			FROM = {
				has_government_attribute = unlock_special_state_edicts
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.15
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_movement_button
	tooltip = global_edicts_movement_button_tt
	potential = {
		FROM = {
			has_country_flag = fra_enable_infrastructure_network_flag
		}
		NOT = {
			current_age = age_of_revolutions
		}
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.16
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_french_trade_button
	tooltip = global_edicts_french_trade_button_tt
	potential = {
		FROM = {
			has_country_flag = fra_improve_trade_power_state_edict_flag
		}
	}
	trigger = {
		FROM = {
			hidden_trigger = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				country_event = {
					id = global_edicts_commander_events.17
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_made_in_china_button
	tooltip = global_edicts_made_in_china_button_tt
	potential = {
		FROM = {
			has_country_flag = enable_industrialisation_flag
			is_emperor_of_china = yes
		}
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.6
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_edict_of_governance_button
	tooltip = global_edicts_edict_of_governance_button_tt
	potential = {
		FROM = {
			has_country_flag = hab_prosperity_edict
		}
		OR = {
			AND = {
				NOT = {
					current_age = age_of_revolutions
				}
				NOT = {
					FROM = {
						has_country_flag = fra_enable_infrastructure_network_flag
					}
				}
			}
			AND = {
				current_age = age_of_revolutions
				FROM = {
					has_country_flag = fra_enable_infrastructure_network_flag
				}
			}
		}
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.18
				}
			}
		}
	}
}

# PDX couldn't come up with an edict to spend splendor on during
# the age of revolutions, so the buttons gotta shift otherwise it looks
# ugly :)
# They don't shift here btw, they shift in provinceview.gui
custom_button = {
	name = global_edicts_movement_button_shifted
	tooltip = global_edicts_movement_button_tt
	potential = {
		FROM = {
			has_country_flag = fra_enable_infrastructure_network_flag
		}
		current_age = age_of_revolutions
	}
	trigger = {
		hidden_trigger = {
			FROM = {
				NOT = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.16
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_edict_of_governance_button_slot1
	tooltip = global_edicts_edict_of_governance_button_tt
	potential = {
		FROM = {
			has_country_flag = hab_prosperity_edict
		}
		current_age = age_of_revolutions
		NOT = {
			FROM = {
				has_country_flag = fra_enable_infrastructure_network_flag
			}
		}
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.16
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_edict_of_governance_button_slot3
	tooltip = global_edicts_edict_of_governance_button_tt
	potential = {
		FROM = {
			has_country_flag = hab_prosperity_edict
		}
		NOT = {
			current_age = age_of_revolutions
		}
		FROM = {
			has_country_flag = fra_enable_infrastructure_network_flag
		}
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				country_event = {
					id = global_edicts_commander_events.16
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_lock_state_button
	tooltip = global_edicts_lock_state_button_tt
	potential = {
	}
	trigger = {
	}
	frame = {
		number = 1
		trigger = {
			all_province_in_state = {
				NOT = {
					has_province_flag = edict_commander_locked_state
				}
			}
		}
	}
	frame = {
		number = 2
		trigger = {
			any_province_in_state = {
				has_province_flag = edict_commander_locked_state
			}
		}
	}
	effect = {
		hidden_effect = {
			set_variable = {
				which = any_province_has_flag
				value = 0
			}
			every_province_in_state = {
				if = {
					limit = {
						has_province_flag = edict_commander_locked_state
					}
					clr_province_flag = edict_commander_locked_state
					set_variable = {
						which = any_province_has_flag
						value = 1
					}
				}
			}
			if = {
				limit = {
					NOT = {
						check_variable = {
							which = any_province_has_flag
							value = 1
						}
					}
				}
				every_province_in_state = {
					set_province_flag = edict_commander_locked_state
				}
			}
		}
	}
}

custom_button = {
	name = global_edicts_settings_button
	tooltip = global_edicts_settings_button_tt
	potential = {
	}
	trigger = {
		hidden_trigger = {
			NOT = {
				FROM = {
					has_country_flag = edict_event_enabled
				}
			}
		}
	}
	effect = {
		hidden_effect = {
			FROM = {
				country_event = {
					id = global_edict_commander_settings_events.1
				}
			}
		}
	}
}

custom_icon = {
	name = edict_commander_row_1_slot_1_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			has_advancement_effort_quick_select = yes
		}
	}
}

custom_icon = {
	name = edict_commander_row_1_slot_2_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			has_centralization_effort_quick_select = yes
		}
	}
}

custom_icon = {
	name = edict_commander_row_1_slot_3_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			has_defensive_edict_quick_select = yes
		}
	}
}

custom_icon = {
	name = edict_commander_row_1_slot_4_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			OR = {
				AND = {
					has_encourage_development_quick_select = yes
					OR = {
						NOT = {
							has_country_flag = enable_industrialisation_flag
						}
						NOT = {
							is_emperor_of_china = yes
						}
					}
				}
				AND = {
					has_rapid_industrialization_quick_select = yes
					has_country_flag = enable_industrialisation_flag
					is_emperor_of_china = yes
				}
			}
		}
	}
}

custom_icon = {
	name = edict_commander_row_2_slot_1_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			has_increased_enlistment_quick_select = yes
		}
	}
}

custom_icon = {
	name = edict_commander_row_2_slot_2_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			OR = {
				AND = {
					has_protect_trade_quick_select = yes
					NOT = {
						has_country_flag = fra_improve_trade_power_state_edict_flag
					}
				}
				AND = {
					has_promote_trade_quick_select = yes
					has_country_flag = fra_improve_trade_power_state_edict_flag
				}
			}
		}
	}
}

custom_icon = {
	name = edict_commander_row_2_slot_3_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			has_enforce_religious_unity_quick_select = yes
		}
	}
}

custom_icon = {
	name = edict_commander_row_2_slot_4_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			OR = {
				AND = {
					current_age = age_of_discovery
					has_country_flag = feudal_de_jure_law
					has_feudal_de_jure_law_quick_select = yes
				}
				AND = {
					current_age = age_of_reformation
					has_country_flag = religion_enforced_edict
					has_religion_enforced_quick_select = yes
				}
				AND = {
					current_age = age_of_absolutism
					has_country_flag = edict_of_absolutism
					has_edict_of_absolutism_quick_select = yes
				}
				AND = {
					current_age = age_of_revolutions
					has_government_attribute = unlock_special_state_edicts
					has_urbanization_edict_quick_select = yes
				}
			}
		}
	}
}

custom_icon = {
	name = edict_commander_row_3_slot_1_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			OR = {
				AND = {
					current_age = age_of_discovery
					has_government_attribute = unlock_special_state_edicts
					has_feudal_taxes_edict_quick_select = yes
				}
				AND = {
					current_age = age_of_absolutism
					has_government_attribute = unlock_special_state_edicts
					has_state_integration_edict_quick_select = yes
				}
				OR = {
					AND = {
						current_age = age_of_revolutions
						has_country_flag = fra_enable_infrastructure_network_flag
						has_french_infrastructure_network_quick_select = yes
					}
					AND = {
						current_age = age_of_revolutions
						has_country_flag = hab_prosperity_edict
						NOT = {
							has_country_flag = fra_enable_infrastructure_network_flag
						}
						has_edict_of_governance_quick_select = yes
					}
				}
			}
		}
	}
}

custom_icon = {
	name = edict_commander_row_3_slot_2_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			OR = {
				AND = {
					NOT = {
						current_age = age_of_revolutions
					}
					has_country_flag = fra_enable_infrastructure_network_flag
					has_french_infrastructure_network_quick_select = yes
				}
				AND = {
					NOT = {
						current_age = age_of_revolutions
					}
					NOT = {
						has_country_flag = fra_enable_infrastructure_network_flag
					}
					has_country_flag = hab_prosperity_edict
					has_edict_of_governance_quick_select = yes
				}
				AND = {
					current_age = age_of_revolutions
					has_country_flag = fra_enable_infrastructure_network_flag
					has_country_flag = hab_prosperity_edict
					has_edict_of_governance_quick_select = yes
				}
			}
		}
	}
}

custom_icon = {
	name = edict_commander_row_3_slot_3_glow
	potential = {
		FROM = {
			NOT = {
				has_country_flag = edict_event_enabled
			}
			NOT = {
				current_age = age_of_revolutions
			}
			has_country_flag = fra_enable_infrastructure_network_flag
			has_country_flag = hab_prosperity_edict
			has_edict_of_governance_quick_select = yes
		}
	}
}
